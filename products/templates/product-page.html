{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block extra_header %}
    <link rel="stylesheet" type="text/css" href="{% get_static_prefix %}css/carousel.css"/>
{% endblock %}


{% block content %}
    {% include 'similar-products.html' %}
    <section class="product-nav">
        <div class="container">
            <div class="row">
                <div class="col-6"><span>Home / Product</span></div>
                <div class="col-6 text-end"><span><i class="fa fa-arrow-left"></i>&nbsp;Prev | Next&nbsp;<i class="fa fa-arrow-right"></i>&nbsp;</span></div>
            </div>
        </div>
    </section>
    <section class="product-section body-padding">
        <div class="container">
            <div class="d-flex flex-wrap flex-lg-nowrap">
                {% if product_images.count == 1 %}
                <img src="{{ product_images.0.image.url }}" class="w-100"/>
                {% else %}
                <div id="productCarousel" class="carousel carousel-dark slide" style="margin-left: 120px" data-bs-interval="false" data-bs-ride="carousel">
                    <div class="carousel-indicators" style="display: block; margin: 0; padding: 0; margin-left: -100px; width: 100px; z-index: 0;">
                        {% for product_image in product_images %}
                        <button type="button" data-bs-target="#productCarousel" data-bs-slide-to="{{ forloop.counter0 }}" {% if forloop.first %}class="active" aria-current="true" {% endif %}aria-label="Slide {{ forloop.counter }}">
                            <img class="d-block w-100" src="{{ product_image.image.url }}">
                        </button><br/>
                        {% endfor %}
                    </div>
                    <div class="carousel-inner">
                        {% for product_image in product_images %}
                        <div class="carousel-item {% if forloop.first %}active{% endif %}">
                            <img src="{{ product_image.image.url }}" class="d-block w-100"/>
                        </div>
                        {% endfor %}
                    </div>
                    <button class="carousel-control-prev" style="z-index: 1;" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" style="z-index: 1;" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
                {% endif %}
                <div>
                    <h2>{{ product.title }}</h2>
                    <h5 class="pb-3">${{ product.retail_price|intword|intcomma }}</h5>
                    {% if product.status.name != 'Sold' %}
                    {% if is_seller %}
                    <div><a href="{% url 'products:product-sold' product.id %}" class="btn btn-primary vintage-button rounded-3" type="button">Mark as Sold</a></div>
                    {% else %}
                    <div><a href="{% url 'orders:order_create' product.id %}" class="btn btn-primary vintage-button rounded-3" type="button">Order Now</a></div>
                    {% endif %}
                    {% else %}
                        <div><h2>Sold</h2></div>
                    {% endif %}
                    <div class="pt-3" style="font-size: smaller;">
                        <p><img src="{% get_static_prefix %}img/clock.svg"><span style="font-weight: bold;"> Estimated Time:</span> 3-4 Weeks</p>
                        <p><img src="{% get_static_prefix %}img/box-seam.svg"><span style="font-weight: bold;"> Free Shipping:</span> Express front door shipping to the continental US, arrives 21 to 30 days from time of purchase.</p>
                        <p><img src="{% get_static_prefix %}img/truck.svg"><span style="font-weight: bold;"> Ships From:</span> Boerne, TX</p>
                    </div>
                </div>
            </div>
        </div>
        <div id="product details" class="row grey-background" style="font-size: smaller;">
            <div class="offset-md-1 col-md-5">
                <div class="row">
                    <h4>About</h4>
                </div>
                <div class="row">
                    {{ product.description }}
                </div>
            </div>
            <div class="col-md-5">
                <div class="col">
                    <div class="row">
                        <h4>Details</h4>
                    </div>
                    <div class="row">
                        <h5>Dimensions</h5>
                        <p>Height: {{ product.dimension_height|intword }}in.</p>
                        <p>Length: {{ product.dimension_length|intword }}in.</p>
                        <p>Width: {{ product.dimension_width|intword }}in.</p>
                        <p>Weight: {{ product.dimension_weight|intword }}in.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
{% block end_body %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
{% endblock %}